<?php
/**
 * Template part for displaying Page Builder content in page.php.
 *
 * @link https://codex.wordpress.org/Template_Hierarchy
 *
 * @package Alex Lash Design
 */

?>

<?php
	if( have_rows('custom_page_content') ) {
		while( have_rows('custom_page_content') ): the_row();

		if ( get_row_layout() == 'text_w_image' ) {
			$header = get_sub_field('section_header');
			$bodyCopy = get_sub_field('text_block');
			$image = get_sub_field('image');
			$imageURL = $image['url'];
			$imageALT = $image['alt'];

			echo "<section class='text-w-image'>";
				echo "<div class='text-block'>";
					if ($header) echo "<h3>$header</h3>";
					echo $bodyCopy;
			echo "</div>";
				
				echo "<div class='supporting-image-container'>";
					echo "<div class='supporting-image'>";
						echo "<img src='$imageURL' alt='$imageALT' />";
					echo "</div>";
				echo "</div>";
			echo "</section>";
		}
		
		elseif ( get_row_layout() == 'text_block' ) {
			$style = get_sub_field('style');
			$header = get_sub_field('section_title');
			$bodyCopy = get_sub_field('body_text');
			$image = get_sub_field('supporting_image');
			$floaterSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2462.8 1298.2"><title>Floaters</title><g data-name="Layer 2"><g data-name="Layer 10"><path d="M759.6 219.3q-2.1 1.7-2.1 7.1v31.7q0 9.3-3.5 13.1T742.3 275h-9v-9.7h7.1a8.4 8.4 0 0 0 4.8-1q1.5-1 1.5-4.1V226.4q0-6.9 3.4-11.3a12 12 0 0 1 8.4-5 13 13 0 0 1-8.4-5.3q-3.4-4.4-3.4-11.3V159.7q0-3-1.4-4.1a8.4 8.4 0 0 0-4.8-1h-7.1v-9.7h9q8.2 0 11.6 3.8t3.5 13.1v31.7q0 5.4 2.2 7.1t7.7 1.7v15.2Q761.7 217.5 759.6 219.3Z"/><path d="M2088.7 267.3q-2.1 1.7-2.1 7.1v31.7q0 9.3-3.5 13.1T2071.5 323h-9v-9.7h7.1a8.4 8.4 0 0 0 4.8-1q1.5-1 1.5-4.1V274.4q0-6.9 3.4-11.3a12 12 0 0 1 8.4-5 13 13 0 0 1-8.4-5.3q-3.4-4.4-3.4-11.3V207.7q0-3-1.4-4.1a8.4 8.4 0 0 0-4.8-1h-7.1v-9.7h9q8.2 0 11.6 3.8t3.5 13.1v31.7q0 5.4 2.2 7.1t7.7 1.7v15.2Q2090.9 265.5 2088.7 267.3Z"/><path d="M1746.9 358.9v10.4h-18V478.6h18V489h-29.1V358.9Z"/><path d="M2329.9 129.3V19.9h-18V9.5H2341V139.7H2311.9V129.3Z"/><path d="M208.7 961.6V852.3h-18V841.9h29.1V972H190.7V961.6Z"/><path d="M1803 568.6V459.2h-18V448.9H1814V579H1785V568.6Z"/><path d="M89.8 312.6V203.2h-18V192.9h29.1V323H71.8V312.6Z"/><path d="M531.8 61.8V72.2h-18V181.6h18v10.4H502.7V61.8Z"/><path d="M1001 1056.6q2.2-1.7 2.2-7.1v-31.7q0-9.3 3.5-13.1t11.6-3.8h9v9.7h-7.1a8.4 8.4 0 0 0-4.8 1q-1.4 1-1.4 4.1v33.8q0 6.9-3.4 11.4a13 13 0 0 1-8.4 5.3 12 12 0 0 1 8.4 5q3.4 4.4 3.4 11.4v33.8q0 3 1.5 4.1a8.4 8.4 0 0 0 4.8 1h7.1V1131h-9q-8.2 0-11.6-3.8t-3.5-13.1v-31.7q0-5.4-2.1-7.1t-7.7-1.7V1058.3Q998.9 1058.3 1001 1056.6Z"/><path d="M195.9 342.5q2.2-1.7 2.2-7.1v-31.7q0-9.3 3.5-13.1t11.6-3.8h9v9.7h-7.1a8.4 8.4 0 0 0-4.8 1q-1.4 1-1.4 4.1v33.8q0 6.9-3.4 11.4a13 13 0 0 1-8.4 5.3 12 12 0 0 1 8.4 5q3.4 4.4 3.4 11.4v33.8q0 3 1.5 4.1a8.4 8.4 0 0 0 4.8 1h7.1v9.7h-9q-8.2 0-11.6-3.8T198 400v-31.7q0-5.4-2.1-7.1t-7.7-1.7V344.2Q193.7 344.2 195.9 342.5Z"/><path d="M1559.6 919.9Q1555 915.4 1555 905V848.2q0-10.9 5.2-15.8t17-4.9H1600q11.6 0 16.7 4.8t5.1 16v45.3q0 8.3-3.4 11.6t-10.4 3.3a12.6 12.6 0 0 1-7.5-2.1 8.2 8.2 0 0 1-3.4-6.2 13.2 13.2 0 0 1-4.6 3.3 17.6 17.6 0 0 1-6.6 1q-7.1 0-10.2-3.5t-3.2-12.4V868.6q0-7.5 2.1-11.6a11.3 11.3 0 0 1 6.6-5.7q4.5-1.6 12.7-1.6h10v45.4a8 8 0 0 0 0.9 4.3 3.6 3.6 0 0 0 3.3 1.4q2.6 0 3.5-1.2t0.8-5.1V846.8q0-5.3-2.5-8t-8.2-2.7h-25.6q-6 0-8.5 2.6t-2.6 8v59.5q0 9.3 9.3 9.3h25.6v8.7H1574Q1564.2 924.4 1559.6 919.9Zm32.8-25.6a7.6 7.6 0 0 0 1.8-5V857.6h-2.1q-6 0-8.2 2t-2.2 8.1v21.6a10.8 10.8 0 0 0 1 5.2q1 1.9 4.2 1.9A6.6 6.6 0 0 0 1592.4 894.3Z"/><path d="M44.4 1258.9q-4.6-4.5-4.6-14.9v-56.8q0-10.9 5.2-15.8t17-4.9H84.9q11.6 0 16.7 4.8t5.1 16v45.3q0 8.3-3.4 11.6t-10.4 3.3a12.6 12.6 0 0 1-7.5-2.1 8.2 8.2 0 0 1-3.4-6.2 13.2 13.2 0 0 1-4.6 3.3 17.6 17.6 0 0 1-6.6 1q-7.1 0-10.2-3.5t-3.2-12.4v-19.9q0-7.5 2.1-11.6a11.3 11.3 0 0 1 6.6-5.7q4.5-1.6 12.7-1.6h10v45.4a8 8 0 0 0 0.9 4.3 3.6 3.6 0 0 0 3.3 1.4q2.6 0 3.5-1.2t0.8-5.1v-47.6q0-5.3-2.5-8t-8.2-2.7H60.6q-6 0-8.5 2.6t-2.6 8v59.5q0 9.3 9.3 9.3H84.4v8.7H58.8Q49 1263.4 44.4 1258.9Zm32.8-25.6a7.6 7.6 0 0 0 1.8-5v-31.6H77q-6 0-8.2 2t-2.2 8.1v21.6a10.8 10.8 0 0 0 1 5.2q1 1.9 4.2 1.9A6.6 6.6 0 0 0 77.2 1233.3Z"/><path d="M509.5 346.8q-4.6-4.5-4.6-14.9V275.2q0-10.9 5.2-15.8t17-4.9H549.9q11.6 0 16.7 4.8t5.1 16v45.3q0 8.3-3.4 11.6t-10.4 3.3a12.6 12.6 0 0 1-7.5-2.1 8.2 8.2 0 0 1-3.4-6.2 13.2 13.2 0 0 1-4.6 3.3 17.6 17.6 0 0 1-6.6 1q-7.1 0-10.2-3.5t-3.2-12.4V295.5q0-7.5 2.1-11.6a11.3 11.3 0 0 1 6.6-5.7q4.5-1.6 12.7-1.6h10V322.1a8 8 0 0 0 0.9 4.3 3.6 3.6 0 0 0 3.3 1.4q2.6 0 3.5-1.2t0.8-5.1V273.8q0-5.3-2.5-8t-8.2-2.7H525.7q-6 0-8.5 2.6t-2.6 8v59.5q0 9.3 9.3 9.3h25.6v8.7H523.9Q514 351.3 509.5 346.8Zm32.8-25.6a7.6 7.6 0 0 0 1.8-5V284.6H542q-6 0-8.2 2t-2.2 8.1v21.6a10.8 10.8 0 0 0 1 5.2q1 1.9 4.2 1.9A6.6 6.6 0 0 0 542.3 321.2Z"/><path d="M2382.9 268.8q-4.6-4.5-4.6-14.9V197.2q0-10.9 5.2-15.8t17-4.9h22.8q11.6 0 16.7 4.8t5.1 16v45.3q0 8.3-3.4 11.6t-10.4 3.3a12.6 12.6 0 0 1-7.5-2.1 8.2 8.2 0 0 1-3.4-6.2 13.2 13.2 0 0 1-4.6 3.3 17.6 17.6 0 0 1-6.6 1q-7.1 0-10.2-3.5t-3.2-12.4V217.5q0-7.5 2.1-11.6a11.3 11.3 0 0 1 6.6-5.7q4.5-1.6 12.7-1.6h10v45.4a8 8 0 0 0 0.9 4.3 3.6 3.6 0 0 0 3.3 1.4q2.6 0 3.5-1.2t0.8-5.1V195.8q0-5.3-2.5-8t-8.2-2.7h-25.6q-6 0-8.5 2.6t-2.6 8V255.3q0 9.3 9.3 9.3h25.6v8.7h-25.6Q2387.4 273.3 2382.9 268.8Zm32.8-25.6a7.6 7.6 0 0 0 1.8-5V206.6h-2.1q-6 0-8.2 2t-2.2 8.1v21.6a10.8 10.8 0 0 0 1 5.2q1 1.9 4.2 1.9A6.6 6.6 0 0 0 2415.7 243.2Z"/><path d="M854.4 595.1l-12.2-19.7-12.6 19.7-9.7-7.3 14.8-16.9-20.1-4.4 3.7-11.1 19.5 7.9-1.8-21H848.6l-1.8 21 19.8-7.6 3.5 10.9-20.3 4.3 14.7 17Z"/><path d="M1550.5 128.3l-12.2-19.7-12.6 19.7-9.7-7.3L1530.8 104l-20.1-4.4 3.7-11.1L1534 96.4l-1.8-21h12.5l-1.8 21 19.8-7.6 3.5 10.9L1545.8 104l14.7 17Z"/><path d="M2431 106.7V85h-20.9V74.6H2431V52.7h11.1V74.6h20.8V85h-20.8V106.7Z"/><path d="M2117.4 738.1V716.3h-20.9V705.9h20.9V684.1h11.1v21.9h20.8v10.4h-20.8v21.7Z"/><path d="M1076.3 54V32.3h-20.9V21.9h20.9V0h11.1V21.9h20.8V32.3h-20.8V54Z"/><path d="M2406.1 1281.1v-21.7h-20.9V1249h20.9v-21.9h11.1V1249H2438v10.4h-20.8v21.7Z"/><path d="M921 1074.1v-21.7h-20.9V1042H921V1020.1h11.1V1042h20.8v10.4H932.1v21.7Z"/><path d="M20.9 66V44.3H0V33.9H20.9V12H32V33.9H52.8V44.3H32V66Z"/><path d="M1721.5 976.1l-12.2-19.7-12.6 19.7-9.7-7.3 14.8-16.9-20.1-4.4 3.7-11.1 19.5 7.9-1.8-21h12.5l-1.8 21 19.8-7.6 3.5 10.9-20.3 4.3 14.7 17Z"/><path d="M629.9 1242.2v-10.5h19.7a11.5 11.5 0 0 0 8.3-3 9.8 9.8 0 0 0 3.2-7.3v-11.6a10.1 10.1 0 0 0-2.1-6.7q-2.1-2.6-6.4-2.6h-2.8q-10.2 0-16.2-6t-6-17.5v-3.9q0-19.1 16.9-22.7v-16.1h11.8v15.2h14.7v10.5h-19.8a11.5 11.5 0 0 0-8.3 3 9.8 9.8 0 0 0-3.2 7.3v9.1a9.8 9.8 0 0 0 2.8 7.1 9.6 9.6 0 0 0 7.2 2.8h2.8q9.8 0 15.3 5.7t5.5 17.2v6.4q0 9.6-4.4 15.3t-12.5 7.5v15.9H644.4v-15.2Z"/><path d="M184.7 189V178.5h19.7a11.5 11.5 0 0 0 8.3-3 9.8 9.8 0 0 0 3.2-7.3V156.5a10.1 10.1 0 0 0-2.1-6.7q-2.1-2.6-6.4-2.6h-2.8q-10.2 0-16.2-6t-6-17.5v-3.9q0-19.1 16.9-22.7V81.1H211V96.3h14.7v10.5h-19.8a11.5 11.5 0 0 0-8.3 3 9.8 9.8 0 0 0-3.2 7.3v9.1a9.8 9.8 0 0 0 2.8 7.1 9.6 9.6 0 0 0 7.2 2.8h2.8q9.8 0 15.3 5.7t5.5 17.2v6.4q0 9.6-4.4 15.3T211 188.4v15.9H199.3V189Z"/><path d="M1779 1283v-10.5h19.7a11.5 11.5 0 0 0 8.3-3 9.8 9.8 0 0 0 3.2-7.3v-11.6a10.1 10.1 0 0 0-2.1-6.7q-2.1-2.6-6.4-2.6h-2.8q-10.2 0-16.2-6t-6-17.5v-3.9q0-19.1 16.9-22.7V1175h11.8v15.2H1820v10.5h-19.8a11.5 11.5 0 0 0-8.3 3 9.8 9.8 0 0 0-3.2 7.3v9.1a9.8 9.8 0 0 0 2.8 7.1 9.6 9.6 0 0 0 7.2 2.8h2.8q9.8 0 15.3 5.7t5.5 17.2v6.4q0 9.6-4.4 15.3t-12.5 7.5v15.9h-11.8V1283Z"/></g></g></svg>';

			echo "<section class='$style-container'>";
				if ($header) echo "<h3>$header</h3>";
				echo $bodyCopy;

				print_r();

				if ($style=="special") {
					echo "<div class='floater-container'>$floaterSVG</div>";
				}
			
				if ($image) {
					echo "<div class='supporting-image-container'>";
						echo "<div class='supporting-image'>$image</div>";
					echo "</div>";
				}
			echo "</section>";
		}

		elseif ( get_row_layout() == 'gallery' ) {
			$imageNumber = '2';

			if( have_rows('image_row') ) {
				echo "<section class='images'>";
				while( have_rows('image_row') ): the_row();
					$images = get_sub_field('image_row');
					if ($images) {
						$imagesCount = count($images);

						echo "<ul class='gallery gallery-columns-$imagesCount'>";

							foreach( $images as $image ):
								$imageURL = $image['url'];
								$imageALT = $image['alt'];

								echo "<div class='gallery-item'>";
									echo "<img src='$imageURL' alt='$imageALT' />";
								echo "</div>";
							endforeach;
						echo "</ul>";
					}
				endwhile;
				echo "</section>";
			}
		}

		elseif ( get_row_layout() == 'lined_up_blocks' ) {
			$header = get_sub_field('blocks_title');

			if( have_rows('block') ) {
				// echo "<h2>$header</h2>";
				echo "<section class='lined-up-blocks'>";
				while( have_rows('block') ): the_row();
					$blockTitle = get_sub_field('section_title');
					$bodyCopy = get_sub_field('body_text');

					echo "<div class='block'>";
						if ($blockTitle) echo "<h3>$blockTitle</h3>";
						echo $bodyCopy;
					echo "</div>";
				endwhile;
				echo "</section>";
			}
		}
		endwhile;
	}
?>